{"id":"628cd5b4-3ba1-4afc-8ff0-bbc6aec39fb7","revision":0,"last_node_id":91,"last_link_id":165,"nodes":[{"id":32,"type":"VAELoader","pos":[1352,422],"size":[315,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"vae名称","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[60,82]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"]},{"id":70,"type":"CLIPVisionEncode","pos":[431.2784729003906,-396.73291015625],"size":[290,78],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"clip视觉","name":"clip_vision","type":"CLIP_VISION","link":124},{"localized_name":"图像","name":"image","type":"IMAGE","link":142},{"localized_name":"裁剪","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"CLIP视觉输出","name":"CLIP_VISION_OUTPUT","type":"CLIP_VISION_OUTPUT","slot_index":0,"links":[127]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPVisionEncode"},"widgets_values":["center"]},{"id":72,"type":"StyleModelLoader","pos":[411.2784118652344,-276.7339172363281],"size":[340,60],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"风格模型名称","name":"style_model_name","type":"COMBO","widget":{"name":"style_model_name"},"link":null}],"outputs":[{"localized_name":"风格模型","name":"STYLE_MODEL","type":"STYLE_MODEL","links":[126]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"StyleModelLoader"},"widgets_values":["flux1-redux-dev.safetensors"]},{"id":74,"type":"StyleModelApply","pos":[771.279296875,-396.73291015625],"size":[320,122],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":128},{"localized_name":"风格模型","name":"style_model","type":"STYLE_MODEL","link":126},{"localized_name":"clip视觉输出","name":"clip_vision_output","type":"CLIP_VISION_OUTPUT","link":127},{"localized_name":"强度","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"强度类型","name":"strength_type","type":"COMBO","widget":{"name":"strength_type"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[129]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"StyleModelApply"},"widgets_values":[1,"multiply"]},{"id":26,"type":"FluxGuidance","pos":[593,44],"size":[317.4000244140625,58],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":41},{"localized_name":"引导","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[128]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"FluxGuidance"},"widgets_values":[30]},{"id":38,"type":"InpaintModelConditioning","pos":[952,78],"size":[302.4000244140625,138],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":129},{"localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":81},{"localized_name":"vae","name":"vae","type":"VAE","link":82},{"localized_name":"像素","name":"pixels","type":"IMAGE","link":153},{"localized_name":"遮罩","name":"mask","type":"MASK","link":154},{"localized_name":"噪波遮罩","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null}],"outputs":[{"localized_name":"正面条件","name":"positive","type":"CONDITIONING","slot_index":0,"links":[77]},{"localized_name":"负面条件","name":"negative","type":"CONDITIONING","slot_index":1,"links":[78]},{"localized_name":"Latent","name":"latent","type":"LATENT","slot_index":2,"links":[88]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"InpaintModelConditioning"},"widgets_values":[false]},{"id":23,"type":"CLIPTextEncode","pos":[144,-7],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":62},{"localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[41]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":7,"type":"CLIPTextEncode","pos":[141.06871032714844,429.3861083984375],"size":[425.27801513671875,180.6060791015625],"flags":{"collapsed":true},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":63},{"localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[81]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#322","bgcolor":"#533"},{"id":75,"type":"Note","pos":[218.37094116210938,206.0338592529297],"size":[290.93646240234375,88.99921417236328],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["由于使用redux此处可不填"],"color":"#432","bgcolor":"#653"},{"id":34,"type":"DualCLIPLoader","pos":[-237,79],"size":[315,130],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"CLIP名称1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"CLIP名称2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"类型","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"设备","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[62,63]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"]},{"id":83,"type":"ReduxProcess","pos":[-459.5316467285156,-323.32476806640625],"size":[378,46],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":140},{"localized_name":"ref_mask","name":"ref_mask","type":"MASK","link":141}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[142]}],"properties":{"Node name for S&R":"ReduxProcess"},"widgets_values":[]},{"id":73,"type":"CLIPVisionLoader","pos":[69.07898712158203,-503.0654296875],"size":[370,60],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"clip名称","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP视觉","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[124]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"CLIPVisionLoader"},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":82,"type":"MaskOption","pos":[-206.56280517578125,750.6734008789062],"size":[352.79998779296875,78],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"sketch","name":"sketch","type":"MASK","link":135},{"localized_name":"upload","name":"upload","type":"MASK","link":136},{"localized_name":"option","name":"option","type":"COMBO","widget":{"name":"option"},"link":null}],"outputs":[{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[141,143]}],"title":"Ref_mask_option","properties":{"Node name for S&R":"MaskOption"},"widgets_values":["upload"]},{"id":85,"type":"CropBack","pos":[1846.4765625,484.9985656738281],"size":[327.5999755859375,146],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"raw_image","name":"raw_image","type":"IMAGE","link":165},{"localized_name":"H1","name":"H1","type":"H1","link":147},{"localized_name":"W1","name":"W1","type":"W1","link":148},{"localized_name":"H2","name":"H2","type":"H2","link":149},{"localized_name":"W2","name":"W2","type":"W2","link":150},{"localized_name":"old_tar_image","name":"old_tar_image","type":"old_tar_image","link":151},{"localized_name":"tar_box_yyxx_crop","name":"tar_box_yyxx_crop","type":"tar_box_yyxx_crop","link":152}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[156]}],"properties":{"Node name for S&R":"CropBack"},"widgets_values":[]},{"id":9,"type":"SaveImage","pos":[2219.46728515625,75.3333511352539],"size":[828.9535522460938,893.8475341796875],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"图片","name":"images","type":"IMAGE","link":156},{"localized_name":"文件名前缀","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":76,"type":"LoraLoaderModelOnly","pos":[1520.7386474609375,-242.78897094726562],"size":[315,82],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":133},{"localized_name":"LoRA名称","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"模型强度","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","links":[134]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["20250321-082022_steps5000_pytorch_lora_weights.safetensors",1]},{"id":86,"type":"PreviewImage","pos":[789.43994140625,1059.72900390625],"size":[588.32666015625,442.0199279785156],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":158}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":81,"type":"MaskOption","pos":[-198.27432250976562,1277.5740966796875],"size":[352.79998779296875,78],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"sketch","name":"sketch","type":"MASK","link":138},{"localized_name":"upload","name":"upload","type":"MASK","link":139},{"localized_name":"option","name":"option","type":"COMBO","widget":{"name":"option"},"link":null}],"outputs":[{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[144]}],"title":"Src_mask_option","properties":{"Node name for S&R":"MaskOption"},"widgets_values":["upload"]},{"id":84,"type":"FillProcess","pos":[268.15966796875,713.9813842773438],"size":[380.4000244140625,218],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"source_image","name":"source_image","type":"IMAGE","link":146},{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":145},{"localized_name":"source_mask","name":"source_mask","type":"MASK","link":144},{"localized_name":"ref_mask","name":"ref_mask","type":"MASK","link":143},{"localized_name":"iterations","name":"iterations","type":"INT","widget":{"name":"iterations"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[153]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[154]},{"localized_name":"H1","name":"H1","type":"H1","links":[147]},{"localized_name":"W1","name":"W1","type":"W1","links":[148]},{"localized_name":"H2","name":"H2","type":"H2","links":[149]},{"localized_name":"W2","name":"W2","type":"W2","links":[150]},{"localized_name":"old_tar_image","name":"old_tar_image","type":"old_tar_image","links":[151]},{"localized_name":"tar_box_yyxx_crop","name":"tar_box_yyxx_crop","type":"tar_box_yyxx_crop","links":[152]},{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[158]}],"properties":{"Node name for S&R":"FillProcess"},"widgets_values":[2]},{"id":8,"type":"VAEDecode","pos":[1620,98],"size":[210,46],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"Latent","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":60}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[165]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":31,"type":"UNETLoader","pos":[1148.4638671875,-235.78736877441406],"size":[315,82],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"UNet名称","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"数据类型","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[133]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"UNETLoader"},"widgets_values":["flux1-fill-dev.safetensors","fp8_e4m3fn"]},{"id":78,"type":"LoadImage","pos":[-1078.9261474609375,628.24267578125],"size":[315,314],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[140,145]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[135]}],"title":"Load_ref_image","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImage"},"widgets_values":["5.png","image"]},{"id":80,"type":"LoadImageMask","pos":[-719.0171508789062,627.2947387695312],"size":[315,318],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"通道","name":"channel","type":"COMBO","widget":{"name":"channel"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[136]}],"title":"Load_ref_mask","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImageMask"},"widgets_values":["5 (1).png","red","image"]},{"id":79,"type":"LoadImage","pos":[-1089.28564453125,1206.080322265625],"size":[315,314],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[146]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[138]}],"title":"Load_src_image","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImage"},"widgets_values":["5 (2).png","image"]},{"id":77,"type":"LoadImageMask","pos":[-698.533935546875,1205.022705078125],"size":[315,318],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"通道","name":"channel","type":"COMBO","widget":{"name":"channel"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[139]}],"title":"Load_src_mask","properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"LoadImageMask"},"widgets_values":["5 (3).png","red","image"]},{"id":3,"type":"KSampler","pos":[1280,100],"size":[315,262],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":134},{"localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":77},{"localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":78},{"localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":88},{"localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"采样器名称","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.30","Node name for S&R":"KSampler"},"widgets_values":[42,"fixed",50,1,"euler","normal",1]}],"links":[[7,3,0,8,0,"LATENT"],[41,23,0,26,0,"CONDITIONING"],[60,32,0,8,1,"VAE"],[62,34,0,23,0,"CLIP"],[63,34,0,7,0,"CLIP"],[77,38,0,3,1,"CONDITIONING"],[78,38,1,3,2,"CONDITIONING"],[81,7,0,38,1,"CONDITIONING"],[82,32,0,38,2,"VAE"],[88,38,2,3,3,"LATENT"],[124,73,0,70,0,"CLIP_VISION"],[126,72,0,74,1,"STYLE_MODEL"],[127,70,0,74,2,"CLIP_VISION_OUTPUT"],[128,26,0,74,0,"CONDITIONING"],[129,74,0,38,0,"CONDITIONING"],[133,31,0,76,0,"MODEL"],[134,76,0,3,0,"MODEL"],[135,78,1,82,0,"MASK"],[136,80,0,82,1,"MASK"],[138,79,1,81,0,"MASK"],[139,77,0,81,1,"MASK"],[140,78,0,83,0,"IMAGE"],[141,82,0,83,1,"MASK"],[142,83,0,70,1,"IMAGE"],[143,82,0,84,3,"MASK"],[144,81,0,84,2,"MASK"],[145,78,0,84,1,"IMAGE"],[146,79,0,84,0,"IMAGE"],[147,84,2,85,1,"H1"],[148,84,3,85,2,"W1"],[149,84,4,85,3,"H2"],[150,84,5,85,4,"W2"],[151,84,6,85,5,"old_tar_image"],[152,84,7,85,6,"tar_box_yyxx_crop"],[153,84,0,38,3,"IMAGE"],[154,84,1,38,4,"MASK"],[156,85,0,9,0,"IMAGE"],[158,84,8,86,0,"IMAGE"],[165,8,0,85,0,"IMAGE"]],"groups":[{"id":2,"title":"Redux Model","bounding":[61.2788200378418,-580.332275390625,1040,507.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Reference","bounding":[-1127.897216796875,493.8901062011719,775.4630126953125,524.798583984375],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Source","bounding":[-1127.7064208984375,1083.024169921875,783.5238647460938,517.1103515625],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.1,"offset":[-659.8000787998996,66.39938187446121]},"frontendVersion":"1.17.11"},"version":0.4}